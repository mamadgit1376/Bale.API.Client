
-----

# Mohammad.Bale.Bot.Client

[](https://www.google.com/search?q=https://www.nuget.org/packages/Mohammad.Bale.Bot.Client/)

**Ù„ÛŒÙ†Ú© Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨:** [https://github.com/mamadgit1376/Bale.API.Client](https://github.com/mamadgit1376/Bale.API.Client)

ÛŒÚ© Ú©Ù„Ø§ÛŒÙ†Øª Ø¯Ø§Øªâ€ŒÙ†Øª Ø³Ø§Ø¯Ù‡ØŒ Ù…Ø¯Ø±Ù† Ùˆ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ø¨Ø§ **API Ø¨Ø§Ø²ÙˆÛŒ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù† Ø¨Ù„Ù‡**. Ø§ÛŒÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ØªÙ…Ø§Ù… Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTP Ø±Ø§ Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ØªØ§ Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ Ø¨Ø§ Ù…ØªØ¯Ù‡Ø§ Ùˆ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ ØªØ§ÛŒÙ¾â€ŒØ´Ø¯Ù‡ (Strongly-typed) Ø¨Ø§ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ø¨Ù„Ù‡ ØªØ¹Ø§Ù…Ù„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.

## ğŸš€ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

  - **Ú©Ø§Ù…Ù„Ø§Ù‹ ØºÛŒØ±Ù‡Ù…Ø²Ù…Ø§Ù† (Async):** ØªÙ…Ø§Ù… Ù…ØªØ¯Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª `async/await` Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
  - **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² API:** ØªÙ…Ø§Ù… Ù…ØªØ¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø³Ù…ÛŒ Ø¨Ø§Ø²ÙˆÛŒ Ø¨Ù„Ù‡ Ø±Ø§ Ù¾ÙˆØ´Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
  - **Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Strongly-Typed:** ØªÙ…Ø§Ù… Ø¢Ø¨Ø¬Ú©Øªâ€ŒÙ‡Ø§ÛŒ API (Ù…Ø§Ù†Ù†Ø¯ `Message`, `Update`, `Chat`) Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ C\# Ù…Ø¯Ù„â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
  - **Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¢Ø³Ø§Ù†:** Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© Ù…ØªØ¯ Ú©Ù…Ú©ÛŒ (Extension Method) Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ Ø¯Ø± Ø³ÛŒØ³ØªÙ… ØªØ²Ø±ÛŒÙ‚ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ (Dependency Injection) Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ASP.NET Core Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯.
  - **Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ÛŒÙ†Ù‡ HttpClient:** Ø¨Ø§ Ø¨Ù‡Ø±Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø² `IHttpClientFactory` Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª.
  - **URL Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… (Configurable URL):** Ø§Ù…Ú©Ø§Ù† ØªØºÛŒÛŒØ± Ø¢Ø¯Ø±Ø³ Ù¾Ø§ÛŒÙ‡ API Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ÛŒØ§ Ø¢Ù¾Ø¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡.
  - **Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒØ§ÙØªÙ‡:** Ù¾Ø±ØªØ§Ø¨ Ø§Ø³ØªØ«Ù†Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ `BaleApiException` Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ø®Ø·Ø§ Ø§Ø² Ø³Ù…Øª API Ø¨Ù„Ù‡.

## ğŸ”§ Ù†ØµØ¨

Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ† Ù¾Ú©ÛŒØ¬ Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ NuGet Gallery Ø¨Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ø®ÙˆØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.

**Ø§Ø² Ø·Ø±ÛŒÙ‚ .NET CLI:**

```bash
dotnet add package Mohammad.Bale.Bot.Client
```

**Ø§Ø² Ø·Ø±ÛŒÙ‚ Package Manager Console:**

```powershell
Install-Package Mohammad.Bale.Bot.Client
```

## ğŸ Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹

Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø¯Ø± ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡ ASP.NET Core Ø¨Ø³ÛŒØ§Ø± Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª.

### Û±. Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ `appsettings.json`

Ø§Ø¨ØªØ¯Ø§ ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± ÙØ§ÛŒÙ„ `appsettings.json` Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.

```json
{
  "BaleBotSettings": {
    "BotToken": "YOUR_UNIQUE_BOT_TOKEN_FROM_BOTFATHER"
  }
}
```

### Û². Ø«Ø¨Øª Ø³Ø±ÙˆÛŒØ³ Ø¯Ø± `Program.cs`

Ø³Ù¾Ø³ØŒ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØ¯ Ú©Ù…Ú©ÛŒ `AddBaleBotClient`ØŒ Ø³Ø±ÙˆÛŒØ³ Ø±Ø§ Ø¯Ø± `Program.cs` Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.

```csharp
// using Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
using Bale.API.Client; 

var builder = WebApplication.CreateBuilder(args);

// ... Ø³Ø§ÛŒØ± Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§

// Ø«Ø¨Øª Ú©Ù„Ø§ÛŒÙ†Øª Ø±Ø¨Ø§Øª Ø¨Ù„Ù‡ (Ø±ÙˆØ´ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯)
builder.Services.AddBaleBotClient(options =>
{
    // Ø®ÙˆØ§Ù†Ø¯Ù† ØªÙˆÚ©Ù† Ø§Ø² appsettings.json
    options.BotToken = builder.Configuration["BaleBotSettings:BotToken"];

    // (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ø¯Ø±Ø³ Ù¾Ø§ÛŒÙ‡ API Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
    // options.BaseUrl = "https://new.api.bale.ai/"; 
});

var app = builder.Build();

// ...
```

### Û³. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ú©Ù†ØªØ±Ù„Ø±

Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ†ØªØ±ÙÛŒØ³ `IBaleBotClient` Ø±Ø§ Ø¨Ù‡ Ù‡Ø± Ú©Ù†ØªØ±Ù„Ø± ÛŒØ§ Ø³Ø±ÙˆÛŒØ³ÛŒ ØªØ²Ø±ÛŒÙ‚ Ú©Ø±Ø¯Ù‡ Ùˆ Ø§Ø² Ù…ØªØ¯Ù‡Ø§ÛŒ Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

```csharp
using Bale.API.Client.Interfaces;
using Bale.API.Client.Models;
using Bale.API.Client.Exceptions;
using Microsoft.AspNetCore.Mvc;

[ApiController]
[Route("api/[controller]")]
public class BotController : ControllerBase
{
    private readonly IBaleBotClient _baleClient;

    public BotController(IBaleBotClient baleClient)
    {
        _baleClient = baleClient;
    }

    /// <summary>
    /// Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø¨Ø§Øª Ø±Ø§ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø§Ø±ØªØ¨Ø§Ø· Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
    /// </summary>
    [HttpGet("me")]
    public async Task<IActionResult> GetMe()
    {
        try
        {
            var response = await _baleClient.GetMeAsync();
            if (response.Ok)
            {
                return Ok(response.Result);
            }
            return BadRequest(response.Description);
        }
        catch (BaleApiException ex)
        {
            return StatusCode((int)ex.StatusCode, new { Error = ex.Message, Details = ex.ErrorContent });
        }
    }

    /// <summary>
    /// ÛŒÚ© Ù¾ÛŒØ§Ù… "Ø³Ù„Ø§Ù… Ø¯Ù†ÛŒØ§" Ø¨Ù‡ Ú†Øª Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
    /// </summary>
    [HttpPost("send-hello")]
    public async Task<IActionResult> SendHelloMessage([FromQuery] string chatId)
    {
        try
        {
            var response = await _baleClient.SendMessageAsync(chatId, "Ø³Ù„Ø§Ù… Ø¯Ù†ÛŒØ§ Ø§Ø² Ø·Ø±Ù Ø±Ø¨Ø§Øª!");
            if (response.Ok)
            {
                return Ok(response.Result);
            }
            return BadRequest(response.Description);
        }
        catch (BaleApiException ex)
        {
            return StatusCode((int)ex.StatusCode, new { Error = ex.Message, Details = ex.ErrorContent });
        }
    }
}
```

## ğŸ¤ Ù…Ø´Ø§Ø±Ú©Øª

Ø§Ø² Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ù…Ø´Ø§Ø±Ú©Øª Ø¯Ø± Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø§Ú¯ ÛŒØ§ Ø§Ø±Ø§Ø¦Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ØŒ ÛŒÚ© Issue Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ù…Ø®Ø²Ù† Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.

## ğŸ“„ Ù„Ø§ÛŒØ³Ù†Ø³

Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ­Øª Ù„Ø§ÛŒØ³Ù†Ø³ MIT Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª.